from pynput import keyboard
from Quartz import CGEventCreateKeyboardEvent, CGEventPost, kCGHIDEventTap

# When q is pressed, inject Left and Right Arrow keys

# Key codes for macOS arrow keys
LEFT_ARROW = 123
RIGHT_ARROW = 124

def inject_arrow_keys():
    # Press and release Left Arrow
    event_down = CGEventCreateKeyboardEvent(None, LEFT_ARROW, True)
    event_up = CGEventCreateKeyboardEvent(None, LEFT_ARROW, False)
    CGEventPost(kCGHIDEventTap, event_down)
    CGEventPost(kCGHIDEventTap, event_up)

    # Press and release Right Arrow
    event_down = CGEventCreateKeyboardEvent(None, RIGHT_ARROW, True)
    event_up = CGEventCreateKeyboardEvent(None, RIGHT_ARROW, False)
    CGEventPost(kCGHIDEventTap, event_down)
    CGEventPost(kCGHIDEventTap, event_up)

    print("‚Üê ‚Üí injected after 'q'")

# Listener callback
def on_press(key):
    try:
        if key.char == 'q':
            inject_arrow_keys()
    except AttributeError:
        pass  # Non-character keys (shift, etc.)

# Start the listener
with keyboard.Listener(on_press=on_press) as listener:
    print("üëª Listening for 'q' key... Press Ctrl+C to exit.")
    listener.join()
